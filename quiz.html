<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Blare Stew Recruitment Form</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #111;
      color: #eee;
      margin: 0;
      padding: 0;
    }
    .form-container {
      max-width: 600px;
      margin: 2rem auto;
      padding: 2rem;
      background-color: #222;
      border-radius: 8px;
    }
    .form-step {
      display: none;
    }
    .form-step.active {
      display: block;
    }
    h2 {
      color: #f04;
    }
    label {
      display: block;
      margin: 1rem 0 0.5rem;
    }
    input[type="text"],
    input[type="email"],
    textarea {
      width: 100%;
      padding: 0.5rem;
      border: 1px solid #444;
      border-radius: 4px;
      background-color: #333;
      color: #eee;
    }
    input[type="checkbox"],
    input[type="radio"] {
      margin-right: 0.5rem;
    }
    .buttons {
      margin-top: 1.5rem;
    }
    button {
      padding: 0.5rem 1rem;
      margin-right: 1rem;
      background-color: #f04;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    button:hover {
      background-color: #c03;
    }
    iframe {
      width: 100%;
      height: 315px;
      border: none;
      margin-bottom: 1rem;
    }
  </style>
</head>
<body>
  <div class="form-container">
    <form id="recruitmentForm">
      <!-- Step 1: Introduction -->
      <div class="form-step active">
        <h2>Welcome to The Initiation</h2>
        <p>Now it’s time to go deeper into the Stew. Watch this video, then answer what you can. This is not a test. it’s a filtration system.</p>
        <iframe src="https://www.youtube.com/embed/MAbHDA5f1NE?si=EamxDL_KfNewmBHs" title="Blare Stew: What Is It?" allowfullscreen></iframe>
        <div class="buttons">
          <button type="button" onclick="nextStep()">Begin</button>
        </div>
      </div>

      <!-- Step 2: How did you hear about Blare Stew and/or St3W?? Inc.? -->
      <div class="form-step">
        <h2>How did you hear about Blare Stew and/or St3W?? Inc.?</h2>
        <label for="heard_about">Your answer:</label>
        <textarea id="heard_about" name="heard_about" required></textarea>
        <div class="buttons">
          <button type="button" onclick="prevStep()">Back</button>
          <button type="button" onclick="nextStep()">Next</button>
        </div>
      </div>

      <!-- Step 3: In your own words, what is Blare Stew? -->
      <div class="form-step">
        <h2>In your own words, what is Blare Stew?</h2>
        <label for="what_is">Your answer:</label>
        <textarea id="what_is" name="what_is" required></textarea>
        <div class="buttons">
          <button type="button" onclick="prevStep()">Back</button>
          <button type="button" onclick="nextStep()">Next</button>
        </div>
      </div>

      <!-- Step 4: What do you believe the purpose or intent of Blare Stew might be? -->
      <div class="form-step">
        <h2>What do you believe the purpose or intent of Blare Stew might be?</h2>
        <label for="purpose">Your answer:</label>
        <textarea id="purpose" name="purpose" required></textarea>
        <div class="buttons">
          <button type="button" onclick="prevStep()">Back</button>
          <button type="button" onclick="nextStep()">Next</button>
        </div>
      </div>

      <!-- Step 5: What stuck with you the most emotionally, visually, or tonally? -->
      <div class="form-step">
        <h2>What stuck with you the most emotionally, visually, or tonally?</h2>
        <label for="stuck_with_you">Your answer:</label>
        <textarea id="stuck_with_you" name="stuck_with_you"></textarea>
        <div class="buttons">
          <button type="button" onclick="prevStep()">Back</button>
          <button type="button" onclick="nextStep()">Next</button>
        </div>
      </div>

      <!-- Step 6: What did you find confusing or disorienting about the video or concept? -->
      <div class="form-step">
        <h2>What did you find confusing or disorienting about the video or concept?</h2>
        <label for="confusing">Your answer:</label>
        <textarea id="confusing" name="confusing"></textarea>
        <div class="buttons">
          <button type="button" onclick="prevStep()">Back</button>
          <button type="button" onclick="nextStep()">Next</button>
        </div>
      </div>

      <!-- Step 7: Name / Alias / Persona you'd like to go by -->
      <div class="form-step">
        <h2>Name / Alias / Persona you'd like to go by</h2>
        <label for="alias">Your answer:</label>
        <input type="text" id="alias" name="alias" required>
        <div class="buttons">
          <button type="button" onclick="prevStep()">Back</button>
          <button type="button" onclick="nextStep()">Next</button>
        </div>
      </div>

      <!-- Step 8: Email Address -->
      <div class="form-step">
        <h2>Email Address</h2>
        <label for="email">Your email:</label>
        <input type="email" id="email" name="email" required>
        <div class="buttons">
          <button type="button" onclick="prevStep()">Back</button>
          <button type="button" onclick="nextStep()">Next</button>
        </div>
      </div>

      <!-- Step 9: Drop any links to your performance/art/media work, if any -->
      <div class="form-step">
        <h2>Drop any links to your performance/art/media work, if any</h2>
        <label for="links">Your answer:</label>
        <textarea id="links" name="links"></textarea>
        <div class="buttons">
          <button type="button" onclick="prevStep()">Back</button>
          <button type="button" onclick="nextStep()">Next</button>
        </div>
      </div>

      <!-- Step 10: Why do you want to be involved with St3W?? Inc.? -->
      <div class="form-step">
        <h2>Why do you want to be involved with St3W?? Inc.?</h2>
        <label for="why_involved">Your answer:</label>
        <textarea id="why_involved" name="why_involved" required></textarea>
        <div class="buttons">
          <button type="button" onclick="prevStep()">Back</button>
          <button type="button" onclick="nextStep()">Next</button>
        </div>
      </div>

      <!-- Step 11: What do you believe you could contribute to St3W?? Inc.? -->
      <div class="form-step">
        <h2>What do you believe you could contribute to St3W Inc.?</h2>
        <label for="contribute">Your answer:</label>
        <textarea id="contribute" name="contribute" required></textarea>
        <div class="buttons">
          <button type="button" onclick="prevStep()">Back</button>
          <button type="button" onclick="nextStep()">Next</button>
        </div>
      </div>

      <!-- Step 12: Which of the following are you experienced in or comfortable doing? -->
      <div class="form-step">
        <h2>Which of the following are you experienced in or comfortable doing?</h2>
        <label><input type="checkbox" name="skills" value="Performing live"> Performing live</label>
        <label><input type="checkbox" name="skills" value="Visual Art"> Visual Art</label>
        <label><input type="checkbox" name="skills" value="Filmmaking or editing"> Filmmaking or editing</label>
        <label><input type="checkbox" name="skills" value="Writing"> Writing</label>
        <label><input type="checkbox" name="skills" value="Audio production or music"> Audio production or music</label>
        <label><input type="checkbox" name="skills" value="Voice acting"> Voice acting</label>
        <label><input type="checkbox" name="skills" value="Graphic Design"> Graphic Design</label>
        <label><input type="checkbox" name="skills" value="Event Planning or Street Teaming"> Event Planning or Street Teaming</label>
        <label><input type="checkbox" name="skills" value="Other"> Other (explain below)</label>
        <div class="buttons">
          <button type="button" onclick="prevStep()">Back</button>
          <button type="button" onclick="nextStep()">Next</button>
        </div>
      </div>

      <!-- Step 13: Other skills or areas of weirdness we should know about? -->
      <div class="form-step">
        <h2>Other skills or areas of weirdness we should know about?</h2>
        <label for="other_skills">Your answer:</label>
        <textarea id="other_skills" name="other_skills"></textarea>
        <div class="buttons">
          <button type="button" onclick="prevStep()">Back</button>
          <button type="button" onclick="nextStep()">Next</button>
        </div>
      </div>

      <!-- Step 14: Would you be interested in being a Stew Salesperson? -->
      <div class="form-step">
        <h2>Would you be interested in being a Stew Salesperson?</h2>
        <label><input type="radio" name="salesperson" value="Yes" required /> Yes, I’m into it</label><br />
        <label><input type="radio" name="salesperson" value="Maybe" /> Maybe — depends what that means</label><br />
        <label><input type="radio" name="salesperson" value="No" /> No, not really my vibe</label>
        <div class="buttons">
          <button type="button" onclick="prevStep()">Back</button>
          <button type="button" onclick="nextStep()">Next</button>
        </div>
      </div>

      <div class="form-step">
        <h2>Anything else you'd like us to know?</h2>
        <label for="final_notes">Your answer:</label>
        <textarea id="final_notes" name="final_notes"></textarea>
        <div class="buttons">
          <button type="button" onclick="prevStep()">Back</button>
          <button type="submit">Submit</button>
        </div>
      </div>
    </form>
  </div>

  <script>
    const steps = document.querySelectorAll('.form-step');
    let currentStep = 0;

    showStep(currentStep);

    function showStep(stepIndex) {
      steps.forEach((step, index) => {
        step.classList.toggle('active', index === stepIndex);
      });
    }

    function nextStep() {
      const inputs = steps[currentStep].querySelectorAll('textarea, input[type="text"], input[type="email"], input[type="radio"], input[type="checkbox"]');
      let valid = true;
      let hasRequired = false;

      inputs.forEach(input => {
        if (input.hasAttribute('required')) {
          hasRequired = true;
          if ((input.type === 'checkbox' || input.type === 'radio')) {
            const group = steps[currentStep].querySelectorAll(`[name="${input.name}"]`);
            const oneChecked = Array.from(group).some(el => el.checked);
            if (!oneChecked) valid = false;
          } else if (!input.value.trim()) {
            valid = false;
          }
        }
      });

      if (hasRequired && !valid) {
        alert('Please fill out the required fields before continuing.');
        return;
      }

      if (currentStep < steps.length - 1) {
        currentStep++;
        showStep(currentStep);
      }
    }

    function prevStep() {
      if (currentStep > 0) {
        currentStep--;
        showStep(currentStep);
      }
    }

    document.getElementById('recruitmentForm').addEventListener('submit', async function(e) {
      e.preventDefault();

      const data = {};

      // Get all text, email, textarea fields (including empty ones)
      this.querySelectorAll('input[type="text"], input[type="email"], textarea').forEach(input => {
        data[input.name] = input.value || '';
      });

      // Gather all checked checkboxes for 'skills'
      const skillCheckboxes = this.querySelectorAll('input[name="skills"]:checked');
      data['skills'] = Array.from(skillCheckboxes).map(cb => cb.value).join(', ');

      // Get selected radio for 'salesperson'
      const salesperson = this.querySelector('input[type="radio"][name="salesperson"]:checked');
      data['salesperson'] = salesperson ? salesperson.value : '';

      try {
        const response = await fetch('https://script.google.com/macros/s/AKfycbwsCQ8dgQaghnfCDc5SrDCMrznafZ8nyhMAGenKwNJ8nzCvLTfh9zTw_YH9SUzrMAjE/exec', {
          method: 'POST',
          body: new URLSearchParams(data)
        });

        if (response.ok) {
          alert('Form submitted successfully!');
          this.reset();
          currentStep = 0;
          showStep(currentStep);
        } else {
          alert('Submission failed, please try again.');
        }
      } catch (error) {
        alert('Error submitting form: ' + error.message);
      }
    });
  </script>
</body>
</html>
